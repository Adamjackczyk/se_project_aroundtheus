!function(){"use strict";class e{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._id=e._id,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=r,this._handleLikeClick=n,this._isLiked=e.isLiked||!1}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeClick(this)})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteClick(this)}))}toggleLikeButton(){this._isLiked=!this._isLiked,this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_deleteCard(){this._cardElement.remove(),this._cardElement=null}generateCard(){return this._cardElement=this._getTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardElement.querySelector(".card__title").textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._isLiked&&this._cardElement.querySelector(".card__like-button").classList.add("card__like-button_active"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector),this._inactiveButtonClass=this._settings.inactiveButtonClass}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners(),this.toggleButtonState()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}}class s{constructor(e){this._popup=document.querySelector(e),this.handleEscClose=this.handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this.handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this.handleEscClose)}handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}))}}class r extends s{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e),this.handleFormSubmit=t,this.form=this._popup.querySelector(".modal__form"),this.formValidator=s,this.submitButton=this.form.querySelector(".modal__button"),this.submitButtonText=this.submitButton.textContent}getInputValues(){const e={};return this.form.querySelectorAll(".modal__input").forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this.form.querySelectorAll(".modal__input").forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this.form.addEventListener("submit",(e=>{e.preventDefault(),this.renderLoading(!0),this.handleFormSubmit(this.getInputValues()).then((()=>{this.form.reset(),this.formValidator&&this.formValidator.toggleButtonState(),this.close()})).catch((e=>{console.error("Form submission error:",e)})).finally((()=>{this.renderLoading(!1)}))})),super.setEventListeners()}renderLoading(e){this.submitButton.textContent=e?"Saving...":this.submitButtonText}open(){super.open(),this.formValidator&&this.formValidator.resetValidation()}close(){super.close()}setSubmitAction(e){this.handleFormSubmit=e}}const n=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},a=new class{constructor(e){this.baseUrl=e.baseUrl,this.headers=e.headers}_request(e,t){return fetch(e,t).then(this._checkResponse)}getInitialCards(){return this._request(`${this.baseUrl}/cards`,{method:"GET",headers:this.headers})}getUserInfo(){return this._request(`${this.baseUrl}/users/me`,{method:"GET",headers:this.headers})}setUserInfo(e){return this._request(`${this.baseUrl}/users/me`,{method:"PATCH",headers:this.headers,body:JSON.stringify(e)})}addNewCard(e){return this._request(`${this.baseUrl}/cards`,{method:"POST",headers:this.headers,body:JSON.stringify(e)})}deleteCard(e){return this._request(`${this.baseUrl}/cards/${e}`,{method:"DELETE",headers:this.headers})}likeCard(e){return this._request(`${this.baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this.headers})}unlikeCard(e){return this._request(`${this.baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this.headers})}updateUserAvatar(e){return this._request(`${this.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})})}getAppInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"6b68a929-d08e-4cf9-a697-37317d009dd7","Content-Type":"application/json"}});function o(e,t){v.open({name:e,link:t})}function l(t){return new e(t,"#card-template",o,d,c).generateCard()}function d(e){g.open(),g.setSubmitAction((()=>a.deleteCard(e._id).then((()=>{e._deleteCard(),g.close()})).catch((e=>{console.error("Failed to delete card:",e)}))))}function c(e){(e._isLiked?a.unlikeCard(e._id):a.likeCard(e._id)).then((t=>{console.log("Updated card data:",t),e.toggleLikeButton()})).catch((e=>{console.error("Failed to update like status:",e)}))}const h=new class{constructor(e,t){let{items:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}}({items:[],renderer:e=>{const t=l(e);h.addItem(t)}},".cards__list"),u={};document.querySelectorAll(i.formSelector).forEach((e=>{const s=new t(i,e);s.enableValidation(),u[e.getAttribute("id")]=s}));const m=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:r}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._avatarElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,avatar:this._avatarElement.src}}setUserInfo(e){let{name:t,job:s,avatar:r,id:n}=e;this._nameElement.textContent=t,this._jobElement.textContent=s,this._avatarElement.src=r,this._id=n}getUserId(){return this._id}}({nameSelector:"#profile-title",jobSelector:"#profile-desc",avatarSelector:".profile__pic"}),_=new r("#profile-edit-modal",(e=>a.setUserInfo({name:e.title,about:e.description}).then((e=>{m.setUserInfo({name:e.name,job:e.about,avatar:e.avatar})}))),u["edit-profile-form"]),p=new r("#add-card-modal",(e=>a.addNewCard({name:e.title,link:e.link}).then((e=>{const t=l(e);h.addItem(t)}))),u["add-card-form"]),E=new r("#update-avatar-modal",(e=>a.updateUserAvatar(e.avatar).then((e=>{m.setUserInfo({name:e.name,job:e.about,avatar:e.avatar})}))),u["update-avatar-form"]),g=new r("#delete-card-modal",(()=>{}),null);_.setEventListeners(),p.setEventListeners(),E.setEventListeners(),g.setEventListeners();const v=new class extends s{constructor(e){super(e),this._image=this._popup.querySelector(".modal__image"),this._caption=this._popup.querySelector(".modal__image-label")}open(e){let{name:t,link:s}=e;this._image.src=s,this._image.alt=t,this._caption.textContent=t,super.open()}}("#modal-image-display");v.setEventListeners(),document.getElementById("profile-edit-button").addEventListener("click",(()=>{const e=m.getUserInfo();document.getElementById("profile-title-input").value=e.name,document.getElementById("profile-description-input").value=e.job,_.open()})),document.querySelector(".profile__add-button").addEventListener("click",(()=>{p.open()})),document.querySelector(".profile__pic-container").addEventListener("click",(()=>{E.open()})),a.getAppInfo().then((e=>{let[t,s]=e;m.setUserInfo({name:t.name,job:t.about,avatar:t.avatar}),h.renderItems(s.reverse()),0===s.length&&n.forEach((e=>{a.addNewCard(e).then((e=>{const t=l(e);h.addItem(t)})).catch((e=>{console.error("Failed to upload card:",e)}))}))})).catch((e=>{console.error("Failed to fetch app info:",e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxjQUMxQnZHLFNBQVN5SyxlQUFlLHVCQUF1QjdGLE1BQVE4RixFQUFTckwsS0FDaEVXLFNBQVN5SyxlQUFlLDZCQUE2QjdGLE1BQVE4RixFQUFTZixJQUN0RUcsRUFBaUJ2RyxNQUFNLElBR3pCdkQsU0FBU0MsY0FBYyx3QkFBd0JLLGlCQUFpQixTQUFTLEtBQ3ZFOEosRUFBYTdHLE1BQU0sSUFHckJ2RCxTQUNHQyxjQUFjLDJCQUNkSyxpQkFBaUIsU0FBUyxLQUN6QmdLLEVBQWtCL0csTUFBTSxJQUk1QnNDLEVBQ0d1QixhQUNBcEMsTUFBS3FELElBQXVCLElBQXJCcUMsRUFBVUMsR0FBTXRDLEVBQ3RCZSxFQUFTNUMsWUFBWSxDQUNuQm5ILEtBQU1xTCxFQUFTckwsS0FDZnNLLElBQUtlLEVBQVNULE1BQ2Q5QyxPQUFRdUQsRUFBU3ZELFNBRW5CaUIsRUFBUVcsWUFBWTRCLEVBQU1DLFdBR0wsSUFBakJELEVBQU14RyxRQUNSdUIsRUFBYTNDLFNBQVNpRixJQUNwQm5DLEVBQ0dlLFdBQVdvQixHQUNYaEQsTUFBTXFGLElBQ0wsTUFBTXBCLEVBQWNuQixFQUFXdUMsR0FDL0JqQyxFQUFRUSxRQUFRSyxFQUFZLElBRTdCL0QsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTSx5QkFBMEJGLEVBQUksR0FDNUMsR0FFUixJQUVERCxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLDRCQUE2QkYsRUFBSSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkOyAvLyBLZWVwIHRyYWNrIG9mIGNhcmQgSURcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQgfHwgZmFsc2U7IC8vIEtlZXAgdHJhY2sgb2YgbGlrZSBzdGF0dXNcclxuICB9XHJcblxyXG4gIC8vIEdldCB0aGUgY2FyZCB0ZW1wbGF0ZSBmcm9tIHRoZSBET00gYW5kIGNsb25lIGl0XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBjYXJkXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFRvZ2dsZSB0aGUgbGlrZSBidXR0b24ncyBhY3RpdmUgc3RhdGVcclxuICB0b2dnbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9ICF0aGlzLl9pc0xpa2VkO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgdGhlIGNhcmQgZnJvbSB0aGUgRE9NXHJcbiAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8vIEdlbmVyYXRlIHRoZSBjYXJkIGVsZW1lbnQgYW5kIHNldCB1cCBldmVudCBsaXN0ZW5lcnNcclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuaGFuZGxlRXNjQ2xvc2UgPSB0aGlzLmhhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVFc2NDbG9zZShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgZm9ybVZhbGlkYXRvciA9IG51bGwpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLmZvcm1WYWxpZGF0b3IgPSBmb3JtVmFsaWRhdG9yO1xyXG4gICAgdGhpcy5zdWJtaXRCdXR0b24gPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKS5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpOyAvLyBTaG93IFwiU2F2aW5nLi4uXCIgdGV4dFxyXG4gICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQodGhpcy5nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuZm9ybS5yZXNldCgpO1xyXG4gICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRvcikge1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRm9ybSBzdWJtaXNzaW9uIGVycm9yOlwiLCBlcnIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0b3IpIHtcclxuICAgICAgdGhpcy5mb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvbk9wdGlvbnMgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgZm9ybVZhbGlkYXRpb25PcHRpb25zLCBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSB0aGUgQVBJXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjZiNjhhOTI5LWQwOGUtNGNmOS1hNjk3LTM3MzE3ZDAwOWRkN1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKHsgbmFtZSwgbGluayB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCkge1xyXG4gIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XHJcbiAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5fZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIGNhcmQ6XCIsIGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZCkge1xyXG4gIGNvbnN0IGxpa2VBY3Rpb24gPSBjYXJkLl9pc0xpa2VkXHJcbiAgICA/IGFwaS51bmxpa2VDYXJkKGNhcmQuX2lkKVxyXG4gICAgOiBhcGkubGlrZUNhcmQoY2FyZC5faWQpO1xyXG5cclxuICBsaWtlQWN0aW9uXHJcbiAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJVcGRhdGVkIGNhcmQgZGF0YTpcIiwgdXBkYXRlZENhcmQpOyAvLyBMb2cgdGhlIHNlcnZlciByZXNwb25zZVxyXG4gICAgICBjYXJkLnRvZ2dsZUxpa2VCdXR0b24oKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBsaWtlIHN0YXR1czpcIiwgZXJyKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBzZWN0aW9uIHdpdGggYW4gZW1wdHkgYXJyYXkgaW5pdGlhbGx5XHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogW10sXHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuY2FyZHNfX2xpc3RcIlxyXG4pO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuZG9jdW1lbnRcclxuICAucXVlcnlTZWxlY3RvckFsbChmb3JtVmFsaWRhdGlvbk9wdGlvbnMuZm9ybVNlbGVjdG9yKVxyXG4gIC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uT3B0aW9ucywgZm9ybUVsZW1lbnQpO1xyXG4gICAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJpZFwiKV0gPSBmb3JtVmFsaWRhdG9yO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS10aXRsZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIiNwcm9maWxlLWRlc2NcIixcclxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fcGljXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgcmV0dXJuIGFwaVxyXG4gICAgICAuc2V0VXNlckluZm8oe1xyXG4gICAgICAgIG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLFxyXG4gICAgICAgIGFib3V0OiBpbnB1dFZhbHVlcy5kZXNjcmlwdGlvbixcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRVc2VySW5mbykgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICAgIG5hbWU6IHVwZGF0ZWRVc2VySW5mby5uYW1lLFxyXG4gICAgICAgICAgam9iOiB1cGRhdGVkVXNlckluZm8uYWJvdXQsXHJcbiAgICAgICAgICBhdmF0YXI6IHVwZGF0ZWRVc2VySW5mby5hdmF0YXIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJlZGl0LXByb2ZpbGUtZm9ybVwiXVxyXG4pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgIHJldHVybiBhcGlcclxuICAgICAgLmFkZE5ld0NhcmQoe1xyXG4gICAgICAgIG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLFxyXG4gICAgICAgIGxpbms6IGlucHV0VmFsdWVzLmxpbmssXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChuZXdDYXJkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKG5ld0NhcmQpO1xyXG4gICAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJhZGQtY2FyZC1mb3JtXCJdXHJcbik7XHJcblxyXG4vLyBQb3B1cCBmb3IgdXBkYXRpbmcgdGhlIGF2YXRhclxyXG5jb25zdCB1cGRhdGVBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3VwZGF0ZS1hdmF0YXItbW9kYWxcIixcclxuICAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgIHJldHVybiBhcGkudXBkYXRlVXNlckF2YXRhcihpbnB1dFZhbHVlcy5hdmF0YXIpLnRoZW4oKHVwZGF0ZWRVc2VySW5mbykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgbmFtZTogdXBkYXRlZFVzZXJJbmZvLm5hbWUsXHJcbiAgICAgICAgam9iOiB1cGRhdGVkVXNlckluZm8uYWJvdXQsXHJcbiAgICAgICAgYXZhdGFyOiB1cGRhdGVkVXNlckluZm8uYXZhdGFyLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJ1cGRhdGUtYXZhdGFyLWZvcm1cIl1cclxuKTtcclxuXHJcbi8vIE5vIGZvcm0gdmFsaWRhdGlvbiBmb3IgZGVsZXRlQ2FyZFBvcHVwXHJcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2RlbGV0ZS1jYXJkLW1vZGFsXCIsICgpID0+IHt9LCBudWxsKTtcclxuXHJcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnVwZGF0ZUF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjbW9kYWwtaW1hZ2UtZGlzcGxheVwiKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1lZGl0LWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtdGl0bGUtaW5wdXRcIikudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKS52YWx1ZSA9IHVzZXJEYXRhLmpvYjtcclxuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50XHJcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGljLWNvbnRhaW5lclwiKVxyXG4gIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgdXBkYXRlQXZhdGFyUG9wdXAub3BlbigpO1xyXG4gIH0pO1xyXG5cclxuLy8gRmV0Y2ggdXNlciBpbmZvIGFuZCBpbml0aWFsIGNhcmRzIGZyb20gdGhlIHNlcnZlciBhbmQgcmVuZGVyIHRoZW1cclxuYXBpXHJcbiAgLmdldEFwcEluZm8oKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgICBqb2I6IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgICBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhcixcclxuICAgIH0pO1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcy5yZXZlcnNlKCkpO1xyXG5cclxuICAgIC8vIFVwbG9hZCBpbml0aWFsIGNhcmRzIGlmIHRoZSBzZXJ2ZXIgaGFzIG5vbmVcclxuICAgIGlmIChjYXJkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5hZGROZXdDYXJkKGNhcmQpXHJcbiAgICAgICAgICAudGhlbigobmV3Q2FyZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQobmV3Q2FyZCk7XHJcbiAgICAgICAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1cGxvYWQgY2FyZDpcIiwgZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGFwcCBpbmZvOlwiLCBlcnIpO1xyXG4gIH0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIC8vIEEgZ2VuZXJpYyBtZXRob2QgZm9yIG1ha2luZyBfcmVxdWVzdHMgYW5kIGNoZWNraW5nIHJlc3BvbnNlc1xyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIE90aGVyIG1ldGhvZHMgdXNpbmcgdGhlIF9yZXF1ZXN0IG1ldGhvZFxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdW5saWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckF2YXRhcihhdmF0YXJVcmwpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogYXZhdGFyVXJsIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiwgYXZhdGFyLCBpZCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XHJcbiAgICB0aGlzLl9pZCA9IGlkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1sYWJlbFwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaXNMaWtlZCIsImlzTGlrZWQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmRFbGVtZW50IiwidG9nZ2xlTGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9kZWxldGVDYXJkIiwicmVtb3ZlIiwiZ2VuZXJhdGVDYXJkIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJhZGQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsImhhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsImZvcm1WYWxpZGF0b3IiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzdXBlciIsImZvcm0iLCJzdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25UZXh0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwicHJldmVudERlZmF1bHQiLCJyZW5kZXJMb2FkaW5nIiwidGhlbiIsInJlc2V0IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJmaW5hbGx5IiwiaXNMb2FkaW5nIiwic2V0U3VibWl0QWN0aW9uIiwiYWN0aW9uIiwiaW5pdGlhbENhcmRzIiwiZm9ybVZhbGlkYXRpb25PcHRpb25zIiwiZm9ybVNlbGVjdG9yIiwiYXBpIiwib3B0aW9ucyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX3JlcXVlc3QiLCJ1cmwiLCJmZXRjaCIsIl9jaGVja1Jlc3BvbnNlIiwiZ2V0SW5pdGlhbENhcmRzIiwibWV0aG9kIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkTmV3Q2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJ1cGRhdGVVc2VyQXZhdGFyIiwiYXZhdGFyVXJsIiwiYXZhdGFyIiwiZ2V0QXBwSW5mbyIsIlByb21pc2UiLCJhbGwiLCJyZXMiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJhdXRob3JpemF0aW9uIiwicG9wdXBXaXRoSW1hZ2UiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJjYXJkIiwiZGVsZXRlQ2FyZFBvcHVwIiwidXBkYXRlZENhcmQiLCJsb2ciLCJzZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImNhcmRFbGVtZW50IiwiZm9ybVZhbGlkYXRvcnMiLCJnZXRBdHRyaWJ1dGUiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50Iiwiam9iIiwiX3JlZjIiLCJnZXRVc2VySWQiLCJwcm9maWxlRWRpdFBvcHVwIiwiaW5wdXRWYWx1ZXMiLCJ0aXRsZSIsImFib3V0IiwiZGVzY3JpcHRpb24iLCJ1cGRhdGVkVXNlckluZm8iLCJhZGRDYXJkUG9wdXAiLCJuZXdDYXJkIiwidXBkYXRlQXZhdGFyUG9wdXAiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsImdldEVsZW1lbnRCeUlkIiwidXNlckRhdGEiLCJjYXJkcyIsInJldmVyc2UiXSwic291cmNlUm9vdCI6IiJ9